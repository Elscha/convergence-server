version: 6
description: Schema to add groups
changes:

########## Group Class ##########

  - action: CreateClass
    name: Group
    properties:
      - {name: id,          type: String,                     constraints: {mandatory: true, notNull: true, readOnly: true}}
      - {name: description, type: String,                     constraints: {mandatory: true, notNull: true, readOnly: true}}
      - {name: members,     type: LinkSet, linkedClass: User, constraints: {mandatory: true, notNull: true}}

  - action: CreateIndex
    className: Group
    name: Group.id
    type: UniqueHashIndex
    properties: [id]


########## Permission Class ##########

  - action: CreateClass
    name: Permission
    properties:
      - {name: appliesTo,  type: Link,   constraints: {notNull: true, readOnly: true}}
      - {name: permission, type: String, constraints: {mandatory: true, notNull: true, readOnly: true}}
    
 ########## PermissionAssignment Class ##########

  - action: CreateClass
    name: PermissionAssignment
    properties:
      - {name: assignment, type: Link,                          constraints: {notNull: true, readOnly: true}}
      - {name: permission, type: Link, linkedClass: Permission, constraints: {mandatory: true, notNull: true, readOnly: true}}

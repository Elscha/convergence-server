version: 11
description: Cleans up several schema inconsistencies
changes:

########## User Class Changes ##########

  - action: AddProperty
    className: User
    property: {name: lastLogin, type: DateTime, constraints: {notNull: true}}


########## Collection Class Changes ##########

  - action: AddProperty
    className: Collection
    property: {name: userPermissions, type: LinkList, linkedClass: CollectionUserPermissions}

########## ChatChannel Class Changes ##########

  - action: DropProperty
    className: ChatChannel
    name: permissions

  - action: AddProperty
    className: ChatChannel
    name: permissions
    property: {name: permissions, type: LinkSet, linkedClass: Permission, constraints: {mandatory: false, notNull: true}}

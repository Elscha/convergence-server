version: 7
description: Permission Class added
changes:

########## Permission Class ##########

  - action: CreateClass
    name: Permission
    properties:
      - {name: assignedTo, type: Link,   constraints: {notNull: true, readOnly: true}}
      - {name: forRecord,  type: Link,   constraints: {notNull: true, readOnly: true}}
      - {name: permission, type: String, constraints: {mandatory: true, notNull: true, readOnly: true}}
      
  - action: CreateIndex
    className: Permission
    name: Permission.assignedTo_forRecord_permission
    type: UniqueHashIndex
    properties: [assignedTo, forRecord, permission]

########## Chat Channel Changes ##########

  - action: AddProperty
    className: ChatChannel
    property: {name: permissions, type: Link, linkedClass: Permission, constraints: {mandatory: false, notNull: true, readOnly: false}}